<div id="job-component" class="flex flex-col flex-auto min-w-0">
    <!-- Header -->
    <!-- <div class="batch-view-header">
        <button matTooltip="back" mat-icon-button (click)="goBack()">
            <mat-icon class="text-3xl mt-1">arrow_back</mat-icon>
        </button>
    </div> -->

    <!-- Main -->
    <div>
        <div class="flex-auto mb-4 mt-4">
            <div>
                <mat-expansion-panel>
                    <mat-expansion-panel-header>
                        <mat-panel-title> Job Filter </mat-panel-title>
                    </mat-expansion-panel-header>
                    <form [formGroup]="filterForm" class="filter-form">
                        <div
                            class="grid xl:grid-cols-10 lg:grid-cols-10 md:grid-cols-10 gap-4"
                        >
                            <div
                                class="lg:col-span-2 md:col-span-2 xl:col-span-2 sm:col-span-4 col-span-8"
                            >
                                <mat-form-field class="w-full">
                                    <mat-label>Select Batch</mat-label>
                                    <mat-select
                                        placeholder="Select Batch"
                                        formControlName="selectBatch"
                                        (openedChange)="
                                            searchBatch.setValue('')
                                        "
                                    >
                                        <mat-form-field class="w-full p-2">
                                            <input
                                                matInput
                                                #input
                                                placeholder="Search Batch"
                                                [formControl]="searchBatch"
                                                (keydown)="
                                                    onKeydown($event, input)
                                                "
                                            />
                                            <mat-icon
                                                matSuffix
                                                class="secondary-text"
                                                style="cursor: pointer"
                                                *ngIf="searchBatch?.value"
                                                (click)="
                                                    searchBatch.setValue('')
                                                "
                                                >close
                                            </mat-icon>
                                        </mat-form-field>
                                        <mat-option value="">All</mat-option>
                                        <mat-option
                                            *ngFor="
                                                let account of filterBatchList
                                                    | async
                                            "
                                            [value]="account.BatchId"
                                            >{{ account.Name }}</mat-option
                                        >
                                    </mat-select>
                                </mat-form-field>
                            </div>

                            <div
                                class="lg:col-span-2 md:col-span-2 xl:col-span-2 sm:col-span-4 col-span-8"
                            >
                                <mat-form-field class="w-full">
                                    <mat-label>File Name</mat-label>
                                    <input
                                        matInput
                                        formControlName="name"
                                        placeholder="File Name"
                                    />
                                </mat-form-field>
                            </div>

                            <div
                                class="lg:col-span-2 md:col-span-2 xl:col-span-2 sm:col-span-4 col-span-8"
                            >
                                <mat-form-field class="w-full">
                                    <mat-label>Customer Name</mat-label>
                                    <input
                                        matInput
                                        formControlName="customerName"
                                        placeholder="Customer Name"
                                    />
                                </mat-form-field>
                            </div>

                            <div
                                class="lg:col-span-2 md:col-span-2 xl:col-span-2 sm:col-span-4 col-span-8"
                            >
                                <mat-form-field class="w-full">
                                    <mat-label>Job Type</mat-label>
                                    <mat-select
                                        formControlName="type"
                                        placeholder="Job Type"
                                    >
                                        <mat-option
                                            *ngFor="let status of jobList"
                                            [value]="status.value"
                                        >
                                            {{ status.name }}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                            <div
                                class="lg:col-span-2 md:col-span-2 xl:col-span-2 sm:col-span-4 col-span-8"
                            >
                                <mat-form-field class="w-full">
                                    <mat-label>Select Account</mat-label>
                                    <mat-select
                                        placeholder="Select Account"
                                        formControlName="account"
                                        (openedChange)="
                                            searchAccount.setValue('')
                                        "
                                    >
                                        <mat-form-field class="w-full p-2">
                                            <input
                                                matInput
                                                #input
                                                placeholder="Search Account"
                                                [formControl]="searchAccount"
                                                (keydown)="
                                                    onKeydown($event, input)
                                                "
                                            />
                                            <mat-icon
                                                matSuffix
                                                class="secondary-text"
                                                style="cursor: pointer"
                                                *ngIf="searchAccount?.value"
                                                (click)="
                                                    searchAccount.setValue('')
                                                "
                                                >close
                                            </mat-icon>
                                        </mat-form-field>
                                        <mat-option value="">All</mat-option>
                                        <mat-option
                                            *ngFor="
                                                let account of filterAccountList
                                                    | async
                                            "
                                            [value]="account.AccountNumber"
                                            >{{
                                                account.AccountName
                                            }}</mat-option
                                        >
                                    </mat-select>
                                </mat-form-field>
                            </div>

                            <div
                                class="lg:col-span-10 xl:col-span-10 md:col-span-10 col-span-8 flex justify-end mt-6"
                            >
                                <button
                                    mat-raised-button
                                    color="primary"
                                    class="sm:w-28 w-full"
                                    (click)="applyFilters()"
                                >
                                    Search
                                </button>
                            </div>
                        </div>

                        <!-- <div class="grid lg:grid-cols-6 md:grid-cols-8 gap-4">
                            <div class="lg:col-span-2 md:col-span-4 xl:col-span-2 sm:col-span-4 col-span-8">
                                <mat-form-field class="w-full">
                                    <mat-label>File Name</mat-label>
                                    <input matInput formControlName="name" placeholder="File Name">
                                </mat-form-field>
                            </div>
                            <div class="lg:col-span-2 md:col-span-4 xl:col-span-2 sm:col-span-4 col-span-8">
                                <mat-form-field class="w-full">
                                    <mat-label>Job Type</mat-label>
                                    <mat-select formControlName="type" placeholder="Job Type">
                                        <mat-option *ngFor="let status of jobList" [value]="status.value">
                                            {{status.name}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                            <div class="lg:col-span-2 xl:col-span-2 col-span-8 flex justify-end lg:mt-4">
                                <button mat-raised-button color="primary" class="sm:w-28 w-full"
                                    (click)="applyFilters()">Search</button>
                            </div>
                        </div> -->
                        <!-- <div class="flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4">
                                <mat-form-field class="w-full xl:w-6/12">
                                    <input matInput formControlName="name" placeholder="Name">
                                </mat-form-field>
                                <mat-form-field class="w-full xl:w-6/12">
                                    <input matInput formControlName="email" placeholder="Email">
                                </mat-form-field>
                                <mat-form-field class="w-full xl:w-6/12">
                                    <mat-select formControlName="role" placeholder="Select Role" multiple>
                                        <mat-option *ngFor="let role of roleList" [value]="role.roleId">
                                            {{role.roleName}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                                <div class="w-full hidden lg:block"></div>
                                <button mat-raised-button color="primary" class="sm:w-80 w-full"
                                    (click)="applyFilters()">Search</button>
                            </div> -->
                    </form>
                </mat-expansion-panel>
            </div>

            <!-- <div class="job-content job-part mt-4 mat-elevation-z8 bg-white">
                <div class="font-bold pt-4 pl-8">
                    Batch Details
                </div>
                <div class="flex flex-wrap p-5 overflow-x-auto">
                    <div class="flex flex-row min-w-1/2 w-1/2 p-3">
                        <div class="font-bold min-w-[35%]"><span>Batch Name:</span></div>
                        <div style="word-break: break-word;">
                            <span>{{dataDetails?.Name || '-'}}</span>
                        </div>
                    </div>


                    <div class="flex flex-row min-w-1/2 w-1/2 p-3">
                        <div class="font-bold min-w-[35%]"><span>Batch Type:</span></div>
                        <div style="word-break: break-word;">
                            <span>{{dataDetails?.BatchTimeName?.toUpperCase() || '-'}}</span>
                        </div>
                    </div>

                    <div class="flex flex-row min-w-1/2 w-1/2 p-3">
                        <div class="font-bold min-w-[35%]"><span>Batch Time:</span></div>
                        <div style="word-break: break-word;">
                            <span>{{dataDetails?.time?.toUpperCase() || '-'}}</span>
                        </div>
                    </div>
                    <div class="flex flex-row min-w-1/2 w-1/2 p-3">
                        <div class="font-bold min-w-[35%]"><span> Batch Date:</span></div>
                        <div style="word-break: break-word;">
                            <span>{{dataDetails?.date || '-'}}</span>
                        </div>
                    </div>

                    <div class="flex flex-row min-w-1/2 w-1/2 p-3">
                        <div class="font-bold min-w-[35%]"><span>Total Job:</span></div>
                        <div style="word-break: break-word;">
                            <span>{{dataDetails?.TotalJob || '-'}}</span>
                        </div>
                    </div>
                </div>
            </div> -->
            <div class="mat-elevation-z8 mt-6">
                <div class="overflow-x-auto">
                    <table
                        mat-table
                        [dataSource]="dataSource"
                        class="table"
                        matSort
                    >
                        <!-- Name Column -->
                        <ng-container matColumnDef="fileNameOnly">
                            <th
                                mat-header-cell
                                *matHeaderCellDef
                                mat-sort-header
                            >
                                File Name
                            </th>
                            <td mat-cell *matCellDef="let element">
                                {{ element?.FileName }}
                            </td>
                        </ng-container>

                        <ng-container matColumnDef="customer">
                            <th
                                mat-header-cell
                                *matHeaderCellDef
                                mat-sort-header
                            >
                                Customer Name
                            </th>
                            <td mat-cell *matCellDef="let element">
                                {{ "Customer" }}
                            </td>
                        </ng-container>

                        <ng-container matColumnDef="AccountName">
                            <th
                                mat-header-cell
                                *matHeaderCellDef
                                mat-sort-header
                            >
                                Account Name
                            </th>
                            <td mat-cell *matCellDef="let element">
                                {{ element?.Data?.AccountName }}
                            </td>
                        </ng-container>

                        <ng-container matColumnDef="JobTypeId">
                            <th
                                mat-header-cell
                                *matHeaderCellDef
                                mat-sort-header
                            >
                                Job TypeId
                            </th>
                            <td mat-cell *matCellDef="let element">
                                {{ element?.JobTypeId }}
                            </td>
                        </ng-container>

                        <!-- Weight Column -->
                        <!-- <ng-container matColumnDef="phoneNumber">
                            <th mat-header-cell *matHeaderCellDef mat-sort-header> Mapping </th>
                            <td mat-cell *matCellDef="let element"> {{element.mapping}} </td>
                        </ng-container> -->

                        <!-- Symbol Column -->
                        <!-- <ng-container matColumnDef="active">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Active </th>
                        <td mat-cell *matCellDef="let element">
                            <mat-icon class="active" *ngIf='element.active'>check_circle</mat-icon>
                            <mat-icon class="deactive" *ngIf='!element.active'>cancel</mat-icon>
                        </td>
                    </ng-container> -->

                        <!-- Action Column -->
                        <ng-container matColumnDef="action">
                            <th class="w-10" mat-header-cell *matHeaderCellDef>
                                Action
                            </th>
                            <td mat-cell *matCellDef="let element">
                                <mat-icon
                                    class="cursor-pointer"
                                    matTooltip="Edit Job"
                                    (click)="editJob(element)"
                                    >edit</mat-icon
                                >
                                <!-- <button mat-icon-button  aria-label="Actions">
                                    <mat-icon (click)="viewAccount(element)">visibility</mat-icon>
                                </button> -->
                                <!-- <mat-menu #menu="matMenu">
                                    <button mat-menu-item (click)="viewAccount(element)">
                                        <mat-icon>visibility</mat-icon> View
                                    </button>

                                    <button mat-menu-item (click)="viewFileLog(element)">
                                        <mat-icon>file_copy</mat-icon> File Log
                                    </button>
                                </mat-menu> -->
                            </td>
                        </ng-container>

                        <tr
                            mat-header-row
                            *matHeaderRowDef="displayedColumns"
                        ></tr>
                        <tr
                            mat-row
                            *matRowDef="let row; columns: displayedColumns"
                        ></tr>
                    </table>
                </div>
                <mat-paginator
                    [pageSizeOptions]="[10, 20, 30, 50, 100, 500]"
                    showFirstLastButtons
                    aria-label="Select page of periodic elements"
                    (page)="onPageChange($event)"
                    [length]="totalItemCount"
                >
                </mat-paginator>
            </div>
        </div>
        <!-- <div class="fixed bottom-0 right-0 m-4">
            <div
                (click)="createJob()"
                matTooltip="Create Job"
                class="flex items-center justify-center w-12 h-12 bg-orange-500 rounded-full shadow-lg cursor-pointer"
            >
                <mat-icon class="text-white text-3xl">add</mat-icon>
            </div>
        </div> -->
    </div>
</div>
